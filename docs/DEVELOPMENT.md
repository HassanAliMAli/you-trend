# Development Documentation

This document provides an overview of the YouTrend project structure, development guidelines, and coding conventions.

## Project Structure

```
TubeTrends/
  client/                 # React Frontend
    public/               # Static assets for the frontend (e.g., index.html, favicon)
    src/                  # React application source code
      __tests__/          # Frontend tests (Jest, React Testing Library)
      assets/             # Images, fonts, etc.
      components/         # Reusable React components
      contexts/           # React contexts
      pages/              # Page-level components
      styles/             # Global styles, Tailwind setup
      utils/              # Frontend utility functions (e.g., API calls)
      App.js              # Main application component with routing
      index.js            # Entry point for the React application
    build/                # (Generated by `npm run build`) Static build output served by backend
    package.json          # Frontend dependencies and scripts (contains `build` script)
    tailwind.config.js    # Tailwind CSS configuration

  docs/                   # Project documentation
    API.md                # Backend API endpoint documentation
    DEVELOPMENT.md        # This file
    USER_GUIDE.md         # User-facing guide for the application
    TASKS.md              # Development tasks tracking

  server/                 # FastAPI Backend
    static/               # (Alternative location for serving built frontend, if not client/build)
    tests/                # Backend tests (pytest)
    utils/                # Backend utility modules
    .env.example          # Example environment variables file
    main.py               # Main FastAPI application (serves API and static frontend)
    requirements.txt      # Backend Python dependencies

  .gitignore              # Specifies intentionally untracked files
  .buildpacks             # Heroku buildpack configuration (nodejs, python)
  CHANGELOG.md            # Log of notable changes to the project
  PRD.md                  # Product Requirements Document
  Procfile                # Heroku process file (root level)
  README.md               # Project overview, setup, and high-level information
```

## File Purposes

- **`/client`**: Contains all frontend code built with React.
  - `build/`: Contains the production build of the frontend, generated by `npm run build`. These static files are served by the FastAPI backend on Heroku.
- **`/server`**: Contains all backend code built with FastAPI.
  - `main.py`: The main FastAPI application. It defines API endpoints and is configured to serve the static files from `client/build/`.
- **Root Files**:
  - `.buildpacks`: Tells Heroku to use both Node.js (to build the client) and Python (to run the server) buildpacks.
  - `Procfile`: Specifies the command Heroku uses to start the web server (e.g., `cd server && gunicorn ...`).

## Coding Conventions

### General

- **Language**: JavaScript (ES6+) for frontend, Python 3.9+ for backend.
- **Formatting**: Use Prettier for automated code formatting (configure if not already present).
  - Consistent indentation (e.g., 2 spaces for JS/JSON, 4 spaces for Python).
  - Maximum line length: ~100-120 characters.
- **Naming**: Use descriptive names for variables, functions, classes, and files.
  - JavaScript: `camelCase` for variables and functions, `PascalCase` for classes and components.
  - Python: `snake_case` for variables and functions, `PascalCase` for classes.
  - Files: `PascalCase.js` for React components, `snake_case.py` for Python modules.
- **Comments**: Write clear and concise comments for complex logic or non-obvious code sections. Avoid over-commenting simple code.
- **Error Handling**: Implement robust error handling on both frontend and backend. Return meaningful error messages.
- **Security**: Follow security best practices (e.g., validate inputs, protect API keys, use HTTPS).

### Frontend (React)

- **Component Structure**: Keep components small and focused on a single responsibility.
- **State Management**: Use React hooks (`useState`, `useEffect`, `useContext`) for local and shared state. Consider more advanced state management (e.g., Redux, Zustand) if complexity grows significantly.
- **Styling**: Use Tailwind CSS for utility-first styling. Define custom styles or components in `src/styles` or co-locate with components if specific.
- **API Calls**: Use Axios for HTTP requests. Centralize API call logic in `src/utils/api.js` or similar.

### Backend (FastAPI)

- **Modularity**: Organize code into logical modules within the `utils/` directory.
- **Asynchronous Code**: Use `async/await` for I/O-bound operations to keep the server responsive.
- **Dependency Injection**: Leverage FastAPI's dependency injection system for managing dependencies (e.g., database connections, API clients).
- **Validation**: Use Pydantic models for request and response validation.
- **Environment Variables**: Store sensitive information (API keys, database URLs) in environment variables (`.env` file for local development, configured on Heroku for production).
- **Static Files**: The FastAPI application in `server/main.py` is configured to serve the static assets from the `client/build` directory.
A catch-all route is implemented to serve `index.html` for any paths not matching API routes, allowing React Router to handle client-side navigation.

### Git & Version Control

- **Commits**: Write clear, concise commit messages. Follow conventional commit formats if possible (e.g., `feat: add new feature`, `fix: resolve bug`).
- **Branching**: Use feature branches for new development (e.g., `feature/add-xyz`, `fix/bug-abc`). Merge into `main` or `develop` branch after review.
- **Pull Requests**: Use pull requests for code reviews before merging.

## Setup and Running the Project

Refer to the main `README.md` for instructions on setting up and running the application locally (which will now involve the backend serving the frontend for a production-like local setup, or running them separately for development ease).

## Deployment

- **Platform**: Entire application (frontend and backend) deployed on Heroku.
- **Process**:
  1. Heroku uses the `.buildpacks` file to first run the Node.js buildpack.
  2. The Node.js buildpack installs client dependencies (`npm install` in `/client`) and runs the build script (`npm run build` in `/client`), placing output in `/client/build`.
  3. Heroku then uses the Python buildpack to install server dependencies (`pip install -r server/requirements.txt`).
  4. Finally, Heroku uses the root `Procfile` (e.g., `web: cd server && gunicorn -w 4 -k uvicorn.workers.UvicornWorker main:app`) to start the FastAPI server from within the `server` directory.
  5. The FastAPI server serves its API routes and the static frontend files from `../client/build` (adjust path as necessary in `main.py`).

## Testing

- **Frontend**: Use Jest and React Testing Library. Place tests in `client/src/__tests__`.
- **Backend**: Use Pytest. Place tests in `server/tests/`.
- Aim for good test coverage, especially for critical business logic and API endpoints.

This document should be updated as the project evolves. 